generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mongodb"
    url      = env("DATABASE_URL")
}

model Users {
    id            String           @id @default(auto()) @map("_id") @db.ObjectId
    email         String           @unique()
    name          String?
    image         String?
    role          UserRole         @default(USER)
    createdAt     DateTime         @default(now())
    updatedAt     DateTime         @updatedAt()
    feedBackTokes SupportTickets[]
}

model SupportTickets {
    id          String            @id @default(auto()) @map("_id") @db.ObjectId
    department  SupportDepartment
    title       String
    text        String
    fileUrl     String?
    user        Users             @relation(fields: [userId], references: [id])
    userId      String            @db.ObjectId
    createdAt   DateTime          @default(now())
    ticketsState TicketsStatus?
}

model TicketsStatus {
    ticket   SupportTickets @relation(fields: [ticketId], references: [id])
    ticketId String         @map("_id") @db.ObjectId
    status   TicketStatus   @default(InProgress)

    @@id([ticketId])
}

enum UserRole {
    ADMIN
    USER
}

enum SupportDepartment {
    Support
    Suggestions
    Priority
}

enum TicketStatus {
   Read
   InProgress
}
